{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wumpus World - 10x10 Board</title>
    <link rel="stylesheet" href="{% static 'wumpus/style.css' %}">
</head>
<body>
    <div class="game-container">
        <h1 class="game-title">üèπ WUMPUS WORLD üèπ</h1>
        
        <!-- Mode Selection -->
        <div class="mode-selection">
            <h3>Game Mode</h3>
            <div class="mode-buttons">
                <button class="mode-btn active" id="manual-mode" onclick="setGameMode('manual')">
                    üéÆ Manual Play
                </button>
                <button class="mode-btn" id="ai-mode" onclick="setGameMode('ai')">
                    ü§ñ AI Play
                </button>
            </div>
        </div>

        <div class="game-info">
            <div class="info-panel">
                <div class="score">Score: <span id="score">0</span></div>
                <div class="status">Status: <span id="status">Ready</span></div>
                <div class="arrows">Arrows: <span id="arrows">1</span></div>
                <div class="mode">Mode: <span id="current-mode">Manual</span></div>
                <div class="cells-visited">Cells Visited: <span id="cells-visited-display">1</span></div>
                <div class="agent-pos">Agent: <span id="agent-pos-display">(0, 9)</span></div>
            </div>
        </div>

        <div class="main-game-area">
            <!-- Environment Controls - Left Side -->
            <div class="environment-sidebar">
                <h3>Environment</h3>
                <div class="env-buttons-vertical">
                    <button class="env-btn" onclick="generateRandomEnvironment()">
                        üé≤ Random Environment
                    </button>
                    <div class="file-upload-container">
                        <input type="file" id="environment-file-input" accept=".txt" style="display: none;" onchange="handleFileUpload(event)">
                        <button class="env-btn" onclick="document.getElementById('environment-file-input').click()">
                            üìÇ Upload Environment File
                        </button>
                    </div>
                    <button class="env-btn" onclick="resetGame()">
                        üîÑ Reset Game
                    </button>
                    <button class="env-btn" id="toggle-environment" onclick="toggleEnvironment()">
                        üëÅÔ∏è Hide Environment
                    </button>
                </div>
            </div>

            <!-- Board Container and Controls - Center -->
            <div class="board-and-controls-container">
                <div class="board-container">
                    <div class="board-wrapper">
                        <div class="board" id="wumpus-board">
                            <!-- Board will be generated by JavaScript -->
                        </div>
                    </div>
                </div>
                
                <!-- Controls Panel -->
                <div class="controls">
                    <div class="control-group" id="manual-controls">
                        <h3>Manual Controls</h3>
                        <div class="control-buttons">
                            <button class="control-btn" onclick="moveAgent('up')">‚Üë Up</button>
                            <button class="control-btn" onclick="moveAgent('down')">‚Üì Down</button>
                            <button class="control-btn" onclick="moveAgent('left')">‚Üê Left</button>
                            <button class="control-btn" onclick="moveAgent('right')">‚Üí Right</button>
                        </div>
                        <div class="action-buttons">
                            <button class="action-btn shoot" onclick="shootArrow()">üèπ Shoot Arrow</button>
                            <button class="action-btn grab" onclick="grabGold()">ü§≤ Grab Gold</button>
                            <button class="action-btn climb" onclick="climbOut()">ü™ú Climb Out</button>
                        </div>
                    </div>
                    
                    <div class="control-group" id="ai-controls" style="display: none;">
                        <h3>AI Controls</h3>
                        <div class="ai-buttons">
                            <button class="ai-btn" onclick="makeAIMove()">üß† Make AI Move</button>
                            <button class="ai-btn" onclick="autoPlay()">‚ñ∂Ô∏è Auto Play</button>
                            <button class="ai-btn" onclick="pauseAI()">‚è∏Ô∏è Pause AI</button>
                            <button class="ai-btn" onclick="getAIHint()">üí° Get Hint</button>
                        </div>
                        <div class="ai-info">
                            <p id="ai-suggestion">AI ready to analyze...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Side Information -->
            <div class="right-sidebar-wrapper">
                <!-- Move Information Panel -->
                <div class="move-info-panel">
                    <h4>üéØ Move Information</h4>
                    <div class="move-details">
                        <div class="info-item">
                            <span class="info-label">Game Over:</span>
                            <span class="info-value" id="game-over-status">False</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Agent Position:</span>
                            <span class="info-value" id="agent-position">(0, 9)</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Agent Alive:</span>
                            <span class="info-value" id="agent-alive">True</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Agent Direction:</span>
                            <span class="info-value" id="agent-direction">‚Üí</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Has Gold:</span>
                            <span class="info-value" id="has-gold">No</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">AI Suggestion:</span>
                            <span class="info-value" id="ai-move-suggestion">-</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Last Move:</span>
                            <span class="info-value" id="last-move">-</span>
                        </div>
                        <div class="info-item move-result-item">
                            <span class="info-label">Move Result:</span>
                            <span class="info-value move-result" id="move-result">-</span>
                        </div>
                        <div class="info-item percepts-item">
                            <span class="info-label">Percepts:</span>
                            <span class="info-value percepts" id="current-percepts">None</span>
                        </div>
                    </div>
                </div>
                
                <!-- Recent Moves Panel - Separate Box -->
                <div class="recent-moves-panel">
                    <h4>üìù Recent Moves</h4>
                    <div class="move-history-list" id="move-history-list">
                        <div class="no-moves">No moves yet</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="legend">
            <h3>Legend</h3>
            <div class="legend-items">
                <div class="legend-item">
                    <span class="legend-symbol agent">ü§ñ</span>
                    <span>Agent</span>
                </div>
                <div class="legend-item">
                    <span class="legend-symbol wumpus">üëπ</span>
                    <span>Wumpus</span>
                </div>
                <div class="legend-item">
                    <span class="legend-symbol gold">üí∞</span>
                    <span>Gold</span>
                </div>
                <div class="legend-item">
                    <span class="legend-symbol pit">üï≥Ô∏è</span>
                    <span>Pit</span>
                </div>
                <div class="legend-item">
                    <span class="legend-symbol breeze">üí®</span>
                    <span>Breeze</span>
                </div>
                <div class="legend-item">
                    <span class="legend-symbol stench">üíÄ</span>
                    <span>Stench</span>
                </div>
                <div class="legend-item">
                    <span class="legend-symbol glitter">‚ú®</span>
                    <span>Glitter</span>
                </div>
            </div>
        </div>
    </div>

    <script src="{% static 'wumpus/script.js' %}"></script>
</body>
</html>